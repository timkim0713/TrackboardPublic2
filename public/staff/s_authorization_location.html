<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Trackboard</title>
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/v5.12.0/css/all.css"
    />
    <!-- Vendor CSS Files -->
    <link
      href="../assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="../assets/vendor/icofont/icofont.min.css" rel="stylesheet" />
    <link
      href="../assets/vendor/boxicons/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link
      href="../assets/vendor/animate.css/animate.min.css"
      rel="stylesheet"
    />
    <link href="../assets/vendor/venobox/venobox.css" rel="stylesheet" />
    <link
      href="../assets/vendor/owl.carousel/assets/owl.carousel.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Bonbon&display=swap"
      rel="stylesheet"
    />
    <link
      href="../assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link href="../assets/css/style.css" rel="stylesheet" />
    <script src="../assets\vendor\jquery\jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <link href="sidebar-style.css" rel="stylesheet" />
    
    <!--Loading the modal for boards view modal-->
    <script> 
      $(function(){
        $("#bv1").load("../include/bv.html"); 
  

      });
    </script> 
    <!-------------------------------------------->

    <script>
      $(function () {
        $("#header").load("../include/staff_header.html");
        $("#footer").load("../include/staff_footer.html");
      });
    </script>
  </head>
  <body>
    <!-- Run 'firebase serve' and open localhost to see header and footer, otherwise you get CORS error  -->
    <div id="header"></div>
    <button class="openbtn" id="openbtn" onclick="openNav()">
      ☰
    </button>

    <div id="mySidebar" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"> x </a>
      <a id="sidebarPosterDetails">Poster Details</a>
      <a id="sidebarRequestedLocations">Requested Locations</a>
      <a id="sidebarApproval">Approval</a>
      <a id="goBackToRequestPage" href="./s_requests.html">
        ⇐ Go Back to Requests Page
      </a>
      <!-- to requests page-->
    </div>

    <div id="main_content">
      <div class="section-title">
        <h2>REQUESTED LOCATIONS</h2>
      </div>
      <small style="color: cornflowerblue;"
            >*Please check each bulletin board for available capacity</small
          >
     
         
        <table class="table" id="locationsTable">
          <thead class="thead-light">
            <tr>
              <th scope="col">Campus</th>
              <th scope="col">Building</th>
              <th scope="col">Floor</th>
              <th scope="col">Bulletin Board</th>
              <th scope="col">View </th>
            </tr>
          </thead>
          <tbody >
            <div id="bv1">
<!--            <tr >-->
<!--              <td scope="row" >SUNY Korea</td>-->
<!--              <td>Academic Bldg. A</td>-->
<!--              <td>2nd</td>-->
<!--              <td>Library Bulletin Board</td>-->
<!--              <td>    -->
<!--        -->
<!--                  <button type="button" class="btn btn-primary" onclick="openBVPosters('bd1','fl2','lc3')"> View </button>-->
<!--        -->
<!--              </td>-->
<!--            </tr>-->
<!--            <tr>-->
<!--              <td scope="row">SUNY Korea</td>-->
<!--              <td>Academic Bldg. A</td>-->
<!--              <td>2nd</td>-->
<!--              <td>Computer Lab Bulletin Board</td>-->
<!--              <td>        -->
<!--                -->
<!--                <button type="button" class="btn btn-primary" id="bv1" onclick="openBVPosters('bd3','fl5','lc10')"> View </button>       -->
<!--              -->
<!--              </td>-->
<!--            </tr>-->
<!--            <tr>-->
<!--              <td scope="row">SUNY Korea</td>-->
<!--              <td>Academic Bldg. A</td>-->
<!--              <td>2nd</td>-->
<!--              <td>Student Affairs Bulletin Board</td>-->
<!--              <td>-->
<!--                    <button type="button" class="btn btn-primary" id="bv1" onclick="openBVPosters('bd3','fl5','lc10')"> View </button>       -->
<!--        -->
<!--              -->
<!--              </td>-->
<!--            </tr>-->
<!--            <tr>-->
<!--              <td scope="row">SUNY Korea</td>-->
<!--              <td>Academic Bldg. B</td>-->
<!--              <td>4th</td>-->
<!--              <td>CS Commons Bulletin Board</td>-->
<!--              <td>          <button type="button" class="btn btn-primary" id="bv1" onclick="openBVPosters('bd3','fl5','lc10')"> View </button>       -->
<!--              </td>-->
<!--            </tr>-->
<!--            <tr>-->
<!--              <td scope="row">SUNY Korea</td>-->
<!--              <td>Academic Bldg. B</td>-->
<!--              <td>5th</td>-->
<!--              <td>AMS Dept. Lounge Bulletin Board</td>-->
<!--              <td>          <button type="button" class="btn btn-primary" id="bv1" onclick="openBVPosters('bd3','fl5','lc10')"> View </button>       -->
<!--              -->
<!--              </td>-->
<!--            </tr>-->
          </div>
          </tbody>
        </table>
        <br>
          <button style="float: right; " type="button" class="btn btn-success" onclick="openLocations('./s_authorization_approval.html')">Next</button>
        <br>
        <br>

      </div>
    </div>
    <div id="footer"></div>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-storage.js"></script>

    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyBveio8IuFGOMymSnwNgAWqc14BVliUwHY",
        authDomain: "trackboard-d41a2.firebaseapp.com",
        databaseURL: "https://trackboard-d41a2.firebaseio.com",
        projectId: "trackboard-d41a2",
        storageBucket: "trackboard-d41a2.appspot.com",
        messagingSenderId: "880705427344",
        appId: "1:880705427344:web:43e253a149143cc9218515",
        measurementId: "G-5GLK0MX33D",
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();

    </script>
    <script>
      var firestore = firebase.firestore();
      var st = firebase.storage();
      const docRef = firestore.collection("applications");
      var id;

      $(document).ready(function () {
        var parameters = location.search.substring(1).split("&");
        var temp = parameters[0].split("=");
        var tempId = unescape(temp[1]);
        id  = tempId;

        //Sidebar links
        var detailsHref = document.getElementById("sidebarPosterDetails");
        detailsHref.href = './s_authorization_details.html?id=' + id;

        var locationsHref = document.getElementById("sidebarRequestedLocations");
        locationsHref.href = './s_authorization_location.html?id=' + id;

        var approvalHref = document.getElementById("sidebarApproval");
        approvalHref.href = './s_authorization_approval.html?id=' + id;

        docRef.doc(id).get().then(function(doc) {
          if (doc.exists) {
            showLocations(doc.data(), doc.id);
          } else {
            // doc.data() will be undefined in this case
            console.log("No such document!");
          }
        }).catch(function(error) {
          console.log("Error getting document:", error);
        });
      });

      function showLocations(data, id) {
        data.locations.forEach(function (loc) {
          addlocation(loc.campus, loc.building, loc.floor, loc.board);
        });
      }

      function addlocation(campus, build, floor, board) {
        var table = document.getElementById("locationsTable");
        var row = table.insertRow();
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        var cell3 = row.insertCell(2);
        var cell4 = row.insertCell(3);
        var cell5 = row.insertCell(4);


        row.setAttribute("scope", "row");

        cell1.innerText = campus.trim();
        cell2.innerText = build.trim();
        cell3.innerText = floor.trim();
        cell4.innerText = board.trim();
        cell5.innerHTML = "<button type=\"button\" class=\"btn btn-info\" id=\"bv1\" onclick=\"openBVPosters('bd3','fl5','lc10')\"> View </button>";
      }

      function openLocations(path) {
        window.location.href = path + "?id=" + id;
      }
    </script>


    <script src="sidebar.js"></script>
    

    <script src="../assets/vendor/jquery/jquery.min.js"></script>
    <script src="./assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
      crossorigin="anonymous"
    />
  </body>
</html>
