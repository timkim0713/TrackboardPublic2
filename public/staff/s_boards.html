<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Trackboard</title>
    <!-- <meta content="" name="descriptison">
    <meta content="" name="keywords"> -->
    
    <!-- Favicons -->
    <!-- <link href="" rel="icon">
    <link href="" rel="apple-touch-icon"> -->

    
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <!-- <script src="..\assets\vendor\jquery\jquery.min.js"></script> -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/vendor/icofont/icofont.min.css">
    <link rel="stylesheet" href="../assets/vendor/boxicons/css/boxicons.min.css">
    <link rel="stylesheet" href="../assets/vendor/animate.css/animate.min.css">
    <link rel="stylesheet" href="../assets/vendor/venobox/venobox.css">
    <link rel="stylesheet" href="../assets/vendor/owl.carousel/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.12.0/css/all.css">
    <link href="https://fonts.googleapis.com/css?family=Bonbon&display=swap" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="sidebar-style.css"/>


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script>
      $(function(){
        $("#header").load("../include/staff_header.html"); 
        $("#footer").load("../include/staff_footer.html"); 
      });
    </script> 
  </head>
  <body>
    <!-- Run 'firebase serve' and open localhost to see header and footer, otherwise you get CORS error  -->
    <div id="header"></div>


    <button class="openbtn" id="openbtn" onclick="openNav()">
      â˜°
    </button>
    <div id="mySidebar" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"  style="
      padding: 8px 8px 8px 32px;
      text-decoration: none;
      font-size: 25px;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0);
    "> x </a>
      <a href="./s_requests.html">Poster Requests</a>
      <!-- <a href="./s_map.html">Campus Map</a> -->
      <a href="./s_boards.html"       class="currentPage"
      >Bulletin Boards</a>
      <a href="./s_rules.html">Poster Rules</a>
    </div>

    <div id="main_content" style="min-width: 1090px; display: flex; padding: 10px;">
      <!-- ======= Boards Section ======= -->
      <section id="portfolio" class="portfolio">
        <div class="container">

          <div class="section-title">
            <h2>BULLETIN BOARDS</h2>
            <small style="color: cornflowerblue;">* Navigate through the posters to check for details. You may add new building location, floor, and  bulletin boards locations</small>
          </div>

          <!-- TODO DYNAMICALLY LOAD CONTENT !! Below is an example -->
          <div id="dropdownList">

          </div>

            <!-- TODO DYNAMICALLY LOAD CONTENT !! Below is an example -->
          <div id="posterBoardViewer" class="row portfolio-container" style="width: 1040px; min-height: 720px; max-height: 720px; padding: 11px; margin: 1px; background-color: rgb(180, 203, 204); overflow-y:scroll; display: flex; justify-content: flex-start;"> 
          </div>

          </div>
        </div>
      </section><!-- End Portfolio Section -->


      <div id="footer"></div>
    </div>


    <!-- Template Main JS File -->
    <!-- <script src="../assets/js/main.js"></script> -->

    
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-firestore.js"></script>

    <!-- <script src="../include/init_firebase.js"></script> -->
    <script>
        // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyBveio8IuFGOMymSnwNgAWqc14BVliUwHY",
        authDomain: "trackboard-d41a2.firebaseapp.com",
        databaseURL: "https://trackboard-d41a2.firebaseio.com",
        projectId: "trackboard-d41a2",
        storageBucket: "trackboard-d41a2.appspot.com",
        messagingSenderId: "880705427344",
        appId: "1:880705427344:web:43e253a149143cc9218515",
        measurementId: "G-5GLK0MX33D",
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();

      // var st = firebase.storage();
      var db = firebase.firestore();
    </script>

    <script>

      // var bfl = [];
      var bfl = [
        { building_id: "bd1", building_name: "Building A",
          floors: [
            { floor_id: "fl1", floor_name: "Main Floor",
              locations: [
                { location_id: "lc1", location_name: "Lounge" },
                { location_id: "lc2", location_name: "Student Service Office" },
              ]
            },
            { floor_id: "fl2", floor_name: "4th Floor",
              locations: [
                { location_id: "lc3", location_name: "Main Board" },
                { location_id: "lc4", location_name: "President Office" },
              ]
            }
          ]
        },
        { building_id: "bd2", building_name: "Building B",
          floors: [
            { floor_id: "fl3", floor_name: "MEOW Floor",
              locations: [
                { location_id: "lc5", location_name: "Lazy pool" },
                { location_id: "lc6", location_name: "Jacuzzi" },
              ]
            },
            { floor_id: "fl4", floor_name: "BLUB Floor",
              locations: [
                { location_id: "lc7", location_name: "Everland" },
                { location_id: "lc8", location_name: "Lotte World" },
              ]
            }
          ]
        },
        { building_id: "bd3", building_name: "Building C",
          floors: [
            { floor_id: "fl5", floor_name: "Main Floor",
              locations: [
                { location_id: "lc9", location_name: "Sleeping Spot" },
                { location_id: "lc10", location_name: "Tired Corner" },
              ]
            },
            { floor_id: "fl6", floor_name: "4th Floor",
              locations: [
                { location_id: "lc11", location_name: "Wall1" },
                { location_id: "lc12", location_name: "Wall2" },
              ]
            }
          ]
        }
      ];
      // var myPosters = [];
      var myPosters = [
        { building_id: "bd1", floor_id: "fl1", location_id: "lc1",
          image_link: "../assets/img/posters/poster-1.jpg", 
          uploader: "Albert Zhang", email: "albert.zhang@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl1", location_id: "lc1",
          image_link: "../assets/img/posters/poster-2.jpg", 
          uploader: "Patrick Daniels", email: "patrick.daniels@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl1", location_id: "lc1",
          image_link: "../assets/img/posters/poster-3.jpg", 
          uploader: "Chaya Connell", email: "chaya.connell@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl1", location_id: "lc1",
          image_link: "../assets/img/posters/poster-4.jpg", 
          uploader: "Walter Mack", email: "walter.mack@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl1", location_id: "lc1",
          image_link: "../assets/img/posters/poster-5.jpg", 
          uploader: "Grover Higgs", email: "grover.higgs@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl1", location_id: "lc1",
          image_link: "../assets/img/posters/poster-6.jpg", 
          uploader: "Austin Ashton", email: "austin.ashton@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl1", location_id: "lc2",
          image_link: "../assets/img/posters/poster-7.jpeg", 
          uploader: "Jazmyn Millar", email: "jazom.millar@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl1", location_id: "lc2",
          image_link: "../assets/img/posters/poster-8.jpg", 
          uploader: "Kailum hough", email: "kailum.hough@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl1", location_id: "lc2",
          image_link: "../assets/img/posters/poster-9.jpg", 
          uploader: "Atticus Villanueva", email: "atticus.villanueva@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl1", location_id: "lc2",
          image_link: "../assets/img/posters/poster-10.jpg", 
          uploader: "Dilara Mclaughlin", email: "dilara.mclaughlin@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl1", location_id: "lc2",
          image_link: "../assets/img/posters/poster-11.jpg", 
          uploader: "Cory Gordon", email: "cory.gordon@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl1", location_id: "lc2",
          image_link: "../assets/img/posters/poster-12.jpg", 
          uploader: "Briana Ahmed", email: "briana.ahmed@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl2", location_id: "lc3",
          image_link: "../assets/img/posters/poster-13.jpg", 
          uploader: "Luci Doyle", email: "luci.doyle@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl2", location_id: "lc3",
          image_link: "../assets/img/posters/poster-14.jpg", 
          uploader: "Eden Ryan", email: "eden.ryan@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl2", location_id: "lc3",
          image_link: "../assets/img/posters/poster-15.jpg", 
          uploader: "Zahara Palmer", email: "zahara.palmer@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl2", location_id: "lc3",
          image_link: "../assets/img/posters/poster-16.jpg", 
          uploader: "Kalum Blevins", email: "kalum.Blevins@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl2", location_id: "lc3",
          image_link: "../assets/img/posters/poster-17.jpg", 
          uploader: "Emmmie Morley", email: "emmie.morley@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl2", location_id: "lc3",
          image_link: "../assets/img/posters/poster-18.jpg", 
          uploader: "Muhamed Robbins", email: "muhamen.robbins@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl2", location_id: "lc4",
          image_link: "../assets/img/posters/poster-19.jpg", 
          uploader: "Asiya Harvir", email: "asiya.harvir@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl2", location_id: "lc4",
          image_link: "../assets/img/posters/poster-20.jpg", 
          uploader: "Mary Johnson", email: "mary.johnson@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl2", location_id: "lc4",
          image_link: "../assets/img/posters/poster-21.jpg", 
          uploader: "Dannielle Mcneill", email: "dannielle Mcneill", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl2", location_id: "lc4",
          image_link: "../assets/img/posters/poster-22.jpg", 
          uploader: "Eddie Cook", email: "eddie.cook@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl2", location_id: "lc4",
          image_link: "../assets/img/posters/poster-23.jpg", 
          uploader: "Amiee Thornton", email: "amiee.thorton@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd1", floor_id: "fl2", location_id: "lc4",
          image_link: "../assets/img/posters/poster-24.jpg", 
          uploader: "Harlee Sutherland", email: "harlee.sutherland@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl3", location_id: "lc5",
          image_link: "../assets/img/posters/poster-25.jpg", 
          uploader: "Chelsey Carver", email: "chelsey.carver@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl3", location_id: "lc5",
          image_link: "../assets/img/posters/poster-26.jpg", 
          uploader: "Hamish Goulding", email: "hamish.goulding@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl3", location_id: "lc5",
          image_link: "../assets/img/posters/poster-27.jpg", 
          uploader: "Hadi Weiler", email: "hadi.weiler@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl3", location_id: "lc5",
          image_link: "../assets/img/posters/poster-28.jpg", 
          uploader: "Firatt Kay", email: "firatt.kay@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl3", location_id: "lc5",
          image_link: "../assets/img/posters/poster-29.jpg", 
          uploader: "Riccardo Frame", email: "riccardo.frame@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl3", location_id: "lc5",
          image_link: "../assets/img/posters/poster-30.jpg", 
          uploader: "Neil Stephens", email: "Neil Stephens", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl3", location_id: "lc6",
          image_link: "../assets/img/posters/poster-31.jpg", 
          uploader: "Yousif Lowe", email: "yousif.lower@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl3", location_id: "lc6",
          image_link: "../assets/img/posters/poster-32.jpg", 
          uploader: "Aaisha Harris", email: "aaisha.harris@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl3", location_id: "lc6",
          image_link: "../assets/img/posters/poster-33.jpg", 
          uploader: "Maiya Croft", email: "maiya.croft@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl3", location_id: "lc6",
          image_link: "../assets/img/posters/poster-34.png", 
          uploader: "Federico Solomon", email: "f.solomon@gmail.com", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl3", location_id: "lc6",
          image_link: "../assets/img/posters/poster-35.png", 
          uploader: "Monty Sykes", email: "monty.sykes@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl3", location_id: "lc6",
          image_link: "../assets/img/posters/poster-36.jpg", 
          uploader: "Nikodem.Hubbard", email: "nikodem.hubbard@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl4", location_id: "lc7",
          image_link: "../assets/img/posters/poster-37.jpg", 
          uploader: "Tyric Bucker", email: "tyric.bucker@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl4", location_id: "lc7",
          image_link: "../assets/img/posters/poster-38.jpg", 
          uploader: "Irka Jibbe", email: "irka.jibbe@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl4", location_id: "lc7",
          image_link: "../assets/img/posters/poster-39.jpg", 
          uploader: "Tobias Lee", email: "tobias.lee@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl4", location_id: "lc7",
          image_link: "../assets/img/posters/poster-40.jpg", 
          uploader: "Kailey Hefer", email: "kailey.hefer@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl4", location_id: "lc7",
          image_link: "../assets/img/posters/poster-1.jpg", 
          uploader: "Jarrad Duffy", email: "jarrad.duffy@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl4", location_id: "lc7",
          image_link: "../assets/img/posters/poster-3.jpg", 
          uploader: "Aislinn Suarez", email: "aislinn.suarez@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl4", location_id: "lc8",
          image_link: "../assets/img/posters/poster-5.jpg", 
          uploader: "Zubair Mitch", email: "zubair.mitch@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl4", location_id: "lc8",
          image_link: "../assets/img/posters/poster-7.jpeg", 
          uploader: "Aydin Berry", email: "aydin.berry@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl4", location_id: "lc8",
          image_link: "../assets/img/posters/poster-9.jpg", 
          uploader: "Matthew Wu", email: "matthew.wu@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl4", location_id: "lc8",
          image_link: "../assets/img/posters/poster-11.jpg", 
          uploader: "Stephen Benz", email: "stephen.benz@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl4", location_id: "lc8",
          image_link: "../assets/img/posters/poster-13.jpg", 
          uploader: "Elijah Caddy", email: "elijah.caddy@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd2", floor_id: "fl4", location_id: "lc8",
          image_link: "../assets/img/posters/poster-15.jpg", 
          uploader: "Deren Bucchy", email: "Deren Bucchy", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl5", location_id: "lc9",
          image_link: "../assets/img/posters/poster-17.jpg", 
          uploader: "Jay Bowdy", email: "jb.sounds@gmail.com", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl5", location_id: "lc9",
          image_link: "../assets/img/posters/poster-19.jpg", 
          uploader: "Anis Robbins", email: "anis.robbins@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl5", location_id: "lc9",
          image_link: "../assets/img/posters/poster-21.jpg", 
          uploader: "Byron Swanson", email: "byron Swanson", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl5", location_id: "lc9",
          image_link: "../assets/img/posters/poster-23.jpg", 
          uploader: "Michelle Tung", email: "michelle.tung@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl5", location_id: "lc9",
          image_link: "../assets/img/posters/poster-25.jpg", 
          uploader: "Anna Thomas", email: "anna.thomas@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl5", location_id: "lc9",
          image_link: "../assets/img/posters/poster-27.jpg", 
          uploader: "Fionna Flowers", email: "fionna.flowers@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl5", location_id: "lc10",
          image_link: "../assets/img/posters/poster-29.jpg", 
          uploader: "Nathan Chan", email: "nathan.chan@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl5", location_id: "lc10",
          image_link: "../assets/img/posters/poster-31.jpg", 
          uploader: "Ethan Eve", email: "ethan.eve@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl5", location_id: "lc10",
          image_link: "../assets/img/posters/poster-33.jpg", 
          uploader: "Griffin Chire", email: "griffin.chire@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl5", location_id: "lc10",
          image_link: "../assets/img/posters/poster-35.png", 
          uploader: "Lucce Dowson", email: "lucce.dowson@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl5", location_id: "lc10",
          image_link: "../assets/img/posters/poster-37.jpg", 
          uploader: "Grace Kook", email: "grace.kook@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl5", location_id: "lc10",
          image_link: "../assets/img/posters/poster-39.jpg", 
          uploader: "Fatimah Giravera", email: "Fatimah Giravera", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl6", location_id: "lc11",
          image_link: "../assets/img/posters/poster-2.jpg", 
          uploader: "Teemo Rocks", email: "teemo.rocks@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl6", location_id: "lc11",
          image_link: "../assets/img/posters/poster-4.jpg", 
          uploader: "Malph Gates", email: "malph.gates@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl6", location_id: "lc11",
          image_link: "../assets/img/posters/poster-6.jpg", 
          uploader: "Britney Cares", email: "britney.cares@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl6", location_id: "lc11",
          image_link: "../assets/img/posters/poster-8.jpg", 
          uploader: "Ama Chieere", email: "ama.chieere@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl6", location_id: "lc11",
          image_link: "../assets/img/posters/poster-10.jpg", 
          uploader: "Trixie Le", email: "trixie.le@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl6", location_id: "lc11",
          image_link: "../assets/img/posters/poster-12.jpg", 
          uploader: "Shannon Shirke", email: "shannon.shirke@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl6", location_id: "lc12",
          image_link: "../assets/img/posters/poster-14.jpg", 
          uploader: "Austin Torres", email: "austin.torres@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl6", location_id: "lc12",
          image_link: "../assets/img/posters/poster-16.jpg", 
          uploader: "Vivi En", email: "vivi.en@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl6", location_id: "lc12",
          image_link: "../assets/img/posters/poster-18.jpg", 
          uploader: "Kristy Derrick", email: "kristy.derrick@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl6", location_id: "lc12",
          image_link: "../assets/img/posters/poster-20.jpg", 
          uploader: "Mike Rockey", email: "mike.Rockey@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl6", location_id: "lc12",
          image_link: "../assets/img/posters/poster-22.jpg", 
          uploader: "Henna Klien", email: "henna.klien@stonybrook.edu", 
          sday: "", eday: "",
        },
        { building_id: "bd3", floor_id: "fl6", location_id: "lc12",
          image_link: "../assets/img/posters/poster-24.jpg", 
          uploader: "Emily Dawkwon", email: "emily.dawkson@stonybrook.edu ", 
          sday: "", eday: "",
        },
      ]
        
      var pos_0 = "";
      var pos_1 = "<div class=\"portfolio-item filter-x wow fadeInUp\" style=\"display: inline; width: 250px;\"> <div class=\"portfolio-wrap\"> <figure> <img src=\"";
      var pos_2 = "\" class=\"img-fluid\" alt=\"\"> <a href=\"" ;
      var pos_3 = "\" data-gall=\"portfolioGallery\" class=\"link-preview venobox\" title=\"Preview\"><i class=\"bx bx-plus\"></i></a> <a href=\"\" class=\"link-details\" title=\"More Details\"><i class=\"bx bx-link\"></i></a> </figure><div class=\"portfolio-info\"> <h4><a href=\"\">"
      var pos_4 = "</a></h4> <p>"
      var pos_5 = "</p> </div></div>  </div>";
      var pos_end = "";

      $( document ).ready(function() {
        // TODO call API and get full list of posters and bfl
        // this.bfl = [];
        // this.myPosters = [];
        console.log(bfl);
        // console.log(db);
        // console.log(db.collection("buildings").get());

        let myParams = getParams(window.location.href);
        if( getBuildingName(myParams.bid) !== "All Buildings"  ){
          selectedBuilding = myParams.bid;
        } else {
          selectedBuilding = "*";
        }
        if( getFloorName(myParams.fid) !== "All Floors" ){
          selectedFloor = myParams.fid;
        } else {
          selectedFloor = "*";
        }
        if( getLocationName(myParams.lid) !== "All Locations" ){
          selectedLocation = myParams.lid;
        } else {
          selectedLocation = "*";
        }
        setDropdowns(selectedBuilding, selectedFloor, selectedLocation);
      });
      /*
      db.collection("establishment")
        .where("staff", "array-contains", "staff1@sunykorea.ac.kr") //get proper email later
        .get()
        .then((querySnapshot) => { 
          // console.log(querySnapshot);
          querySnapshot.forEach((doc) => {
            console.log("Establishment", doc.id, doc.data());
            db.collection("buildings")
              .where("belongs_to", "==", doc.id)
              .get()
              .then((bdQuerySnapshot) => {
                bdQuerySnapshot.forEach((bdDoc) => {
                  console.log("Building", bdDoc.id, bdDoc.data());
                  db.collection("floors")
                    .where("belongs_to", "==", bdDoc.id)
                    .get()
                    .then((flQuerySnapshot) => {
                      flQuerySnapshot.forEach((flDoc) => {
                        console.log("Floors", flDoc.id, flDoc.data());
                        db.collection("bulletin_boards")
                          .where("belongs_to", "==", flDoc.id)
                          .get()
                          .then((bbQuerySnapshot) => {
                            bbQuerySnapshot.forEach((bbDoc) => {
                              console.log("Bulletin Board", bbDoc.id, bbDoc.data());
                            })
                          })
                          .catch(function(error) { console.log(error); });
                      })
                    })
                    .catch(function(error) { console.log(error); });
                });
              })
              .catch(function(error) { console.log(error); });
          });
        })
        .catch(function(error) {
          console.error("Error: Could not get data", error);
        });
    */
      function setDropdowns(selB, selF, selL){
        let myBuildings = "";
        let myFloors = "";
        let myLocations = "";
        myBuildings = "<div id=\"buildingDropdownBtn\" class=\"dropdown\" style=\"display: inline-block;\"> <button type=\"button\" class=\"btn btn-primary dropdown-toggle\" data-toggle=\"dropdown\">" + getBuildingName(selB) + " </button> <div class=\"dropdown-menu\"> <a class=\"dropdown-item\" href=\"javascript:setDropdowns('*', '*', '*');\">All Buildings</a>";
        if( selB !== '*' ){
          myFloors = "<div id=\"floorDropdownBtn\" class=\"dropdown\" style=\"display: inline-block;\"> <button type=\"button\" class=\"btn btn-primary dropdown-toggle\" data-toggle=\"dropdown\">" + getFloorName(selF) + "</button> <div class=\"dropdown-menu\"> <a class=\"dropdown-item\" href=\"javascript:setDropdowns('" + selB + "', '*', '*');\">All Floors</a>";
        }
        if( selF !== '*' ){
          myLocations = "<div id=\"locationropdownBtn\" class=\"dropdown\" style=\"display: inline-block;\"> <button type=\"button\" class=\"btn btn-primary dropdown-toggle\" data-toggle=\"dropdown\">" + getLocationName(selL) + "</button> <div class=\"dropdown-menu\"> <a class=\"dropdown-item\" href=\"javascript:setDropdowns('" + selB + "', '" + selF + "', '*');\">All Locations</a>";
        }
        this.bfl.forEach(b => {
          myBuildings = myBuildings + "<a class=\"dropdown-item\" href=\"javascript:setDropdowns('" + b.building_id+ "',  '*',  '*');\">" + b.building_name+"</a>";
          if( selB === b.building_id ){
            b.floors.forEach(f => {
              myFloors = myFloors + "<a class=\"dropdown-item\" href=\"javascript:setDropdowns('"+selB+"', '" + f.floor_id + "',  '*');\">" + f.floor_name + "</a>";
              if( selF === f.floor_id ){
                f.locations.forEach(l => {
                  myLocations = myLocations + "<a class=\"dropdown-item\" href=\"javascript:setDropdowns('"+selB+"', '"+selF+"', '" + l.location_id + "');\">" + l.location_name + "</a>";
                });
              }
            });
          }
        });
        myBuildings = myBuildings + "<hr><a class=\"dropdown-item\" href=\"javascript:addBuilding()\">Add New Building</a><a class=\"dropdown-item\" href=\"javascript:deleteBuilding()\">Delete Building</a></div></div>";
        if( selB !== '*' ){
          myFloors = myFloors + "<hr><a class=\"dropdown-item\" href=\"javascript:addFloor('" + selB + "')\">Add New Floor</a><a class=\"dropdown-item\" href=\"javascript:deleteFloor('" + selB + "')\">Delete Floor</a></div></div>";
        }
        if( selF !== '*' ){
          myLocations = myLocations + "<hr><a class=\"dropdown-item\" href=\"javascript:addLocation('" + selB + "','"+ selF+"')\">Add New Locations</a><a class=\"dropdown-item\" href=\"javascript:deleteLocation('" + selB + "','"+ selF+"')\">Delete Location</a></div></div>";
        }
        var ddl = $('#dropdownList');
        ddl.html( myBuildings + myFloors + myLocations );
        updatePosterItems(selB, selF, selL);
      }

      function updatePosterItems(bid, fid, lid){
        
        var loadPosters = this.pos_0;
        for( let p of this.myPosters ){
          if( !(   (bid === '*') 
                || (bid === p.building_id && fid === '*') 
                || (bid === p.building_id && fid === p.floor_id && lid === '*') 
                || (bid === p.building_id && fid === p.floor_id && lid === p.location_id) ) ){
            continue;
          }
          loadPosters = loadPosters + this.pos_1 + p.image_link + this.pos_2 + p.image_link + this.pos_3 + p.uploader + this.pos_4 + p.email + this.pos_5;
        }
        loadPosters = loadPosters + this.pos_end;
        var pbv = $('#posterBoardViewer');
        pbv.html(loadPosters);
      }

      function getBuildingName(bid){ 
        if( bid === '*' ){ return "All Buildings"; }
        for( let b of this.bfl ){
          if(bid === b.building_id){
            return b.building_name;
          }
        }
        return "All Buildings";
      }
      function getFloorName(fid){ 
        if( fid === '*' ){ return "All Floors"; }
        for( let b of this.bfl ){
          for( let f of b.floors ){
            if(fid === f.floor_id){
              return f.floor_name;
            }
          }
        }
        return "All Floors";
      }
      function getLocationName(lid){
        if( lid === '*' ){ return "All Locations"; }
        for( let b of this.bfl ){
          for( let f of b.floors ){
            for( let l of f.locations ){
              if(lid === l.location_id){
                return l.location_name;
              }
            }
          }
        }
        return "All Locations";
      }

      function buildingNameExists(bname){
        for( let b of this.bfl ){
          if(bname === b.building_name){
            return true;
          }
        }
        return false;
      }
      function floorNameExists(inBid, fname){
        for( let b of this.bfl ){
          if( inBid === b.building_id ){
            for( let f of b.floors ){
              if(fname === f.floor_name){
                return true;
              }
            }
          }
        }
        return false;
      }
      function locationNameExists(inBid, inFid, lname){
        for( let b of this.bfl ){
          if( inBid === b.building_id ){
            for( let f of b.floors ){
              if( inFid === f.floor_id ){
                for( let l of f.locations ){
                  if(lname === l.location_name){
                    return true;
                  }
                }
              }
            }
          }
        }
        return false;
      }

      function addBuilding(){
        let newBdName = prompt("Enter the name of the building you want to add");
        if( newBdName !== "" && newBdName !== null ){
          if( buildingNameExists(newBdName)){
            alert("Building with name \""+newBdName+"\" already exists");
          } else if( confirm("Add Building with name \:" + newBdName + "\"?" ) ){
            alert("Successfully added building with name \"" + newBdName + "\"." );
          }
        }
      }
      function addFloor( inBid ){
        let newFlName = prompt("Enter the name of the Floor you want to add");
        if( newFlName !== "" && newFlName !== null ){
          if( floorNameExists( inBid, newFlName)){
            alert("Floor with name \""+newFlName+"\" already exists");
          } else if( confirm("Add Floor with name \"" + newFlName + "\"?" ) ){
            // TODO Call database to add Floor
            alert("Successfully added a floor with name " + newFlName + "\"."  );
          }
        }
      }
      function addLocation( inBid, inFid ){
        let newLcName = prompt("Enter the name of the Location you want to add");
        if( newLcName !== "" && newLcName !== null ){
          if( locationNameExists( inBid, inFid, newLcName)){
            alert("Location with name \""+newLcName+"\" already exists");
          } else if( confirm("Add Location with name \"" + newLcName + "\"?") ){
            // TODO Call database to add Location
            alert("Successfully added a location with name " + newLcName + "\"."  );
          }
        }
      }
      function deleteBuilding(){
        let delBdName = prompt("WARNING: DELETION OF A BUILDING WILL DELETE ALL FLOORS, LOCATIONS, AND POSTERS RELATED TO THIS BUILDING\n\nEnter the name of the building you want to delete.");
        if( delBdName !== "" && delBdName !== null ){
          if( !buildingNameExists(delBdName)){
            alert("Building with name \""+delBdName+"\" does not exist");
          } else if( confirm("Confirm deletion of Building with name \"" + delBdName + "\"?" ) ){
            alert("Successfully deleted building with name \"" + delBdName + "\"." );
          }
        }
      }
      function deleteFloor( inBid ){
        let delFlName = prompt("WARNING: DELETION OF A FLOOR WILL DELETE ALL LOCATIONS AND POSTERS RELATED TO THIS FLOOR\n\nEnter the name of the floor you want to delete.");
        if( delFlName !== "" && delFlName !== null ){
          if( !floorNameExists( inBid, delFlName)){
            alert("Floor with name \""+delFlName+"\" does not exist");
          } else if( confirm("Confirm deletion of Floor with name \"" + delFlName + "\"?" ) ){
            // TODO call database to delete Floor
            alert("Successfully deleted floor with name " + delFlName + "\"."  );
          }
        }
      }
      function deleteLocation( inBid, inFid ){
        let delLcName = prompt("WARNING: DELETION OF A LOCATION WILL DELETE ALL POSTERS RELATED TO THIS LOCATION\n\nEnter the name of the location you want to delete.");
        if( delLcName !== "" && delLcName !== null ){
          if( !locationNameExists( inBid, inFid, delLcName)){
            alert("Location with name \""+delLcName+"\" does not exist");
          } else if( confirm("Confrim deletions of Location with name \"" + delLcName + "\"?") ){
            // TODO call database to delete Location
            alert("Successfully deleted location with name " + delLcName + "\"."  );
          }
        }
      }


      /**
      * Get the URL parameters
      * source: https://css-tricks.com/snippets/javascript/get-url-variables/
      * @param  {String} url The URL
      * @return {Object}     The URL parameters
      */
      var getParams = function (url) {
        var params = {};
        var parser = document.createElement('a');
        parser.href = url;
        var query = parser.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; i++) {
          var pair = vars[i].split('=');
          params[pair[0]] = decodeURIComponent(pair[1]);
        }
        return params;
      };

 
     
    </script>
    <script src="sidebar.js"></script>    
  </body>
</html>